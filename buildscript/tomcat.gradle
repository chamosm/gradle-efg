
def tomcatHome() {
	String d = System.getProperty('tomcat.home')
	return d == null ? '' : d;
}

def tomcatProc(batFile) {
	ProcessBuilder pb = new ProcessBuilder('cmd', '/C', batFile)
	if (tomcatHome() != '') {
		pb.directory(file(tomcatHome() + '/bin'))
		pb.start()
	}
}

task copyWar(type: Copy, dependsOn: war) {
	from 'build/libs'
	include 'gradle-efg.war'
	into tomcatHome() + '/webapps'
}

task shutdown() {
	tomcatProc('shutdown.bat')
}

task start() {
	tomcatProc('startup.bat')
}