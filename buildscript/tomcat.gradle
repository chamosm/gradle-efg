
def getTomcatHome() {
	String d = System.getProperty('tomcat.home')
	return d == null ? '' : d;
}

def cmdTomcatBat(batFile) {
	ProcessBuilder pb = new ProcessBuilder('cmd', '/C', batFile)
	if (getTomcatHome() != '') {
		pb.directory(file(getTomcatHome() + '/bin'))
		pb.start()
	}
}

task copyWar(type: Copy, dependsOn: war) {
	from 'build/libs'
	include 'gradle-efg.war'
	into getTomcatHome() + '/webapps'
}

task shutdown() {
	cmdTomcatBat('shutdown.bat')
}

task start() {
	cmdTomcatBat('startup.bat')
}